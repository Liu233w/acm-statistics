version: '3'

services:
  # 只有前端支持 hot reload，所以只改动前端
  frontend:
    image: acm-statistics-frontend-base
    working_dir: /var/project/frontend
    volumes:
    - ..:/var/project
    - /var/project/frontend/node_modules
    environment:
    - NODE_ENV=development
    command: sh -c "npm i --unsafe-perm && npm run dev"

  watchtower:
    entrypoint: echo "skip watchtower in development..."